% ------------------------------------------------------------------------------
%						2 Job Management
% ------------------------------------------------------------------------------
\section{Job Management}
\label{sect:job-management}

We use SLURM as the workload manager. It supports primarily two types of jobs:
batch and interactive. Batch jobs are used to run unattended tasks, whereas,
interactive jobs are are ideal for setting up virtual environments, compilation, and debugging.

\noindent\textbf{Note:} In the following instructions, anything bracketed like, \verb+<>+,
indicates a label/value to be replaced (the entire bracketed term needs replacement).

\noindent Job instructions in a script start with \verb+#SBATCH+ prefix, for example:
\begin{verbatim}
    #SBATCH --mem=100M -t 600 -J <job-name> -A <slurm account>
    #SBATCH -p pg --gpus=1 --mail-type=ALL
\end{verbatim}

For complex compute steps within a script, use \tool{srun}. We recommend using \tool{salloc}
for interactive jobs as it supports multiple steps. However, \tool{srun}
can also be used to start interactive jobs (see \xs{sect:interactive-jobs}).
Common and required job parameters include:

Common and required job parameters include:
%\begin{multicols}{2}
\begin{itemize}
	\item Memory (\option{--mem=<mem>[M|G|T]}),
	\item Partition/Queue (\option{-p <partition>}),
	\item Job name (\option{--job-name=<name>} or \option{-J <name>}),
	\item Wall Clock Limit (\option{-t <min> or -t <days-hh:mm:ss>}),
	\item Event Notification (\option{--mail-type=<events>}),
	\item Email Address (\option{--mail-user=<address>}),
	\item Slurm Account (\option{--account=<account> or -A <account>}),
	\item Tasks Per Node (\option{--tasks-per-node=<count>}),
	\item CPUs Per Task (\option{--cpus-per-task=<count>}),
	\item CPU Count ntasks (\option{-n <count>}).
\end{itemize}
%\end{multicols}

% Getting Started
% -------------------------------------------------------------
\input{job-management/getting-started.tex}

% Job Submission Basics
% -------------------------------------------------------------
\input{job-management/job-submission-basics.tex}

% Sample Job Script
% -------------------------------------------------------------
\input{job-management/sample-job-script.tex}

% Common Job Management Commands
% -------------------------------------------------------------
\input{job-management/common-job-commands.tex}

% Advanced sbatch Options
% -------------------------------------------------------------
\input{job-management/advanced-sbatch-options.tex}

% Array Jobs
% -------------------------------------------------------------
\input{job-management/array-jobs.tex}

% Requesting Multiple Cores (i.e., Multithreading Jobs)
% -------------------------------------------------------------
\input{job-management/requesting-multiple-cores.tex}

% Interactive Jobs
% -------------------------------------------------------------
\input{job-management/interactive-jobs.tex}

% Scheduler Environment Variables
% -------------------------------------------------------------
\input{job-management/scheduler-env-variables.tex}

% SSH Keys for MPI
% -------------------------------------------------------------
\input{job-management/ssh-keys.tex}

% Creating Virtual Environments
% -------------------------------------------------------------
\input{job-management/creating-virtual-envs.tex}

% Example Job Script: Fluent
% -------------------------------------------------------------
\include{job-management/ex-fluent.tex}

% Example Job: EfficientDet
% -------------------------------------------------------------
\input{job-management/ex-efficiendet.tex}

% Java Jobs
% -------------------------------------------------------------
\input{job-management/java-jobs.tex}

% Rust Jobs
% -------------------------------------------------------------
\input{job-management/rust-jobs.tex}

% Scheduling on the GPU Nodes
% -------------------------------------------------------------
\input{job-management/scheduling-on-gpus.tex}

% Singularity Containers
% -------------------------------------------------------------
\input{job-management/singularity-containers.tex}